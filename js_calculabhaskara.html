<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calcula Bhaskara em JavaScript</title>
    <link rel="stylesheet" href="js_calculabhaskara.css"/>
    <link rel="icon" type="image/png" href="js_calculabhaskara.png"/>
</head>
<body>
    <h1>Calcula Bhaskara em JavaScript</h1>
    <form>
        <input type="text" name="txtn1" id="txtn1" autofocus> x² +
        <input type="text" name="txtn2" id="txtn2"> x +
        <input type="text" name="txtn3" id="txtn3"> = 0  
        <p><input type="button" value="Calcular" style="width:100px" onclick = "calcular()"></p>
    </form>
    <div id="res">Resultado:</div>
    <br><p><a href="https://github.com/jacknpoe/js_calculabhaskara">Repositório no GitHub</a></p><br>
    <form action="index.html" method="POST" style="border: 0px">
        <p><input type="submit" name="voltar" value="Voltar" style="width:100px"></p>
    </form>
    <script>
        function calcular(){
            var tn1 = window.document.getElementById("txtn1")
            var tn2 = window.document.getElementById("txtn2")
            var tn3 = window.document.getElementById("txtn3")
            var res = window.document.getElementById("res")
            var txt_a = tn1.value
            var txt_b = tn2.value
            var txt_c = tn3.value
            txt_a = txt_a.replace(/,/g, ".")
            txt_b = txt_b.replace(/,/g, ".")
            txt_c = txt_c.replace(/,/g, ".")
            txt_a = txt_a.replace(/ /g, "")
            txt_b = txt_b.replace(/ /g, "")
            txt_c = txt_c.replace(/ /g, "")
            var num_a = Number.parseFloat( txt_a)
            var num_b = Number.parseFloat( txt_b)
            var num_c = Number.parseFloat( txt_c)
            var resultado = ""
            var delta = 0
            var x1 = 0
            var x2 = 0
            // aqui
            if( num_a == 0)
            {
                if( num_b == 0)
                {
                    resultado = "x é indefinido"
                } else {
                    if( num_c == 0)
                    {
                        resultado = "x = 0"                    
                    } else {
                        resultado = "x = " + num_c / num_b * -1
                    }
                }
            } else {
                delta = num_b ** 2 - ( 4 * num_a * num_c)
                if( delta < 0)
                {
                    resultado = "x é indefinido"
                } else {
                    if( delta == 0)
                    {
                        resultado = "x = " + ( num_b * -1 ) / ( 2 * num_a)
                    } else {
                        x1 = ( num_b * -1 - delta ** 0.5) / ( 2 * num_a)
                        x2 = ( num_b * -1 + delta ** 0.5) / ( 2 * num_a)
                        resultado = "x = " + x1 + " e " + x2
                    }
                }
            }
            resultado = resultado.replace(".", ",");
            resultado = resultado.replace(".", ",");
            res.innerHTML = "Resultado: " + resultado
        }
    </script>
</body>
</html>